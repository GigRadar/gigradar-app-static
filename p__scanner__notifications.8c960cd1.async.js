(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{Yi3W:function(m,_,e){m.exports={cardList:"cardList___28flU"}},oeS0:function(m,_,e){"use strict";e.r(_);var N=e("T2oS"),j=e("W9HT"),k=e("Mwp2"),i=e("VXEj"),J=e("7Kak"),r=e("9yH6"),V=e("tU7J"),h=e("wFql"),$=e("+BJd"),I=e("mr32"),H=e("y8nQ"),d=e("Vl3Y"),L=e("tJVT"),U=e("Dp36"),A=e("LvDl"),p=e.n(A),D=e("q1tI"),Y=e.n(D),y=e("9kvl"),C=e("Yi3W"),T=e.n(C),t=e("nKUr"),z=e.n(t),W=function(u){var E,O,v=u.dispatch,l=u.user,B=u.userLoading,R=d.a.useForm(),K=Object(L.a)(R,1),f=K[0];Object(D.useEffect)(function(){return x(l)},[]);var x=function(n){var a;f.setFields([{name:"email-freq",value:((a=n.info)===null||a===void 0?void 0:a["email-freq"])||"daily"}])},b=function(n){v({type:"user/updateCurrentInfo",payload:n})},g=function(n){if(n.origin===new URL(window.location.href).origin){var a=n.data;console.log("window event",a),a.source==="oauth-result"&&a.success&&v({type:"user/fetchCurrent"})}},o,M,S=function(n,a){window.removeEventListener("message",g);var P="toolbar=no, menubar=no, width=600, height=700, top=100, left=100";!o||o.closed?o=window.open(n,a,P):(M!==n&&(o=window.open(n,a,P)),o.focus()),window.addEventListener("message",function(w){return g(w)},!1),M=n},F=((E=l.info)===null||E===void 0?void 0:E["slack-token"])?Object(t.jsx)(I.a,{closable:!0,onClose:function(n){v({type:"user/unlinkSlack"}),n.preventDefault()},children:(O=l.info)===null||O===void 0?void 0:O["slack-team-name"]}):Object(t.jsx)("a",{onClick:function(n){n.preventDefault(),S("https://slack.com/oauth/v2/authorize?"+new URLSearchParams({scope:"incoming-webhook",client_id:"1349362266675.1714348122353",redirect_uri:Object(U.a)("/v1/auth/slack?token=")+l.token}).toString(),"slack-auth")},children:Object(t.jsx)("img",{alt:"Add to Slack",height:"40",width:"139",src:"https://platform.slack-edge.com/img/add_to_slack.png",srcSet:"https://platform.slack-edge.com/img/add_to_slack.png 1x, https://platform.slack-edge.com/img/add_to_slack@2x.png 2x"})});return Object(t.jsx)(d.a,{layout:"horizontal",form:f,onValuesChange:p.a.debounce(function(s){return b(f.getFieldsValue())},300),children:Object(t.jsx)(i.b,{className:T.a.cardList,header:Object(t.jsx)(h.a.Title,{level:4,style:{marginBottom:0},children:"Gig Alerts"}),bordered:!0,dataSource:[Object(t.jsx)(i.b.Item,{actions:[Object(t.jsx)(d.a.Item,{name:"email-freq",children:Object(t.jsxs)(r.a.Group,{children:[Object(t.jsx)(r.a.Button,{value:"never",children:"Never"}),Object(t.jsx)(r.a.Button,{value:"hourly",children:"Hourly"}),Object(t.jsx)(r.a.Button,{value:"daily",children:"Daily"})]})})],children:Object(t.jsx)(i.b.Item.Meta,{title:"Email Notification frequency",description:"Ant Design, a design language for background applications, is refined by Ant UED Team"})}),Object(t.jsx)(i.b.Item,{actions:[B?Object(t.jsx)(j.a,{}):F],children:Object(t.jsx)(i.b.Item.Meta,{title:"Slack Notifications",description:"Ant Design, a design language for background applications, is refined by Ant UED Team"})})],renderItem:function(n){return Object(t.jsx)(t.Fragment,{children:n})}})})};_.default=Object(y.b)(function(c){return{userLoading:c.loading.models.user,user:c.user.currentUser}})(W)}}]);
