(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"0jlH":function(Q,P,s){"use strict";s.r(P);var r=s("q1tI"),X=s.n(r),f=s("95SA"),R=s("aeNJ"),u=s("WHYC"),T=s("9kvl"),E=s("s4NR"),L=s.n(E),o=s("nKUr"),m=s.n(o),b=function(w){var p,M,S=w.children,D=w.loading,l=w.currentUser,U=Object(R.b)(),B=U.update;console.log("security check curr user",l);var n=l&&l.token,e=Object(E.stringify)({redirect:window.location.href});return!n&&D?Object(o.jsx)(f.a,{}):!n&&window.location.pathname!=="/user/login"?Object(o.jsx)(u.c,{to:"/user/login?".concat(e)}):(B({name:(l==null||(p=l.info)===null||p===void 0?void 0:p["first-name"])+" "+(l==null||(M=l.info)===null||M===void 0?void 0:M["last-name"]),email:l==null?void 0:l.email}),Object(o.jsx)(o.Fragment,{children:S}))};P.default=Object(T.b)(function(A){var w=A.user,p=A.loading;return{currentUser:w.currentUser,loading:p.models.user}})(b)},aeNJ:function(Q,P,s){"use strict";s.d(P,"a",function(){return l}),s.d(P,"b",function(){return B});var r=s("q1tI"),X=s.n(r);function f(){return f=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(n[c]=t[c])}return n},f.apply(this,arguments)}function R(n,e){if(n==null)return{};var t={},c=Object.keys(n),d,v;for(v=0;v<c.length;v++)d=c[v],!(e.indexOf(d)>=0)&&(t[d]=n[d]);return t}var u=function(e,t){if(!1)var c},T=function(e){return Object.keys(e).length===0&&e.constructor===Object},E=typeof window=="undefined",L=function n(e){return Object.keys(e).forEach(function(t){e[t]&&typeof e[t]=="object"?n(e[t]):e[t]===void 0&&delete e[t]}),e},o=function(e){if(!E&&window.Intercom){for(var t=arguments.length,c=new Array(t>1?t-1:0),d=1;d<t;d++)c[d-1]=arguments[d];return window.Intercom.apply(null,[e].concat(c))}else u("error",e+" Intercom instance is not initalized yet")},m="Please wrap your component with `IntercomProvider`.",b=Object(r.createContext)({boot:function(){return u("error",m)},shutdown:function(){return u("error",m)},hardShutdown:function(){return u("error",m)},update:function(){return u("error",m)},hide:function(){return u("error",m)},show:function(){return u("error",m)},showMessages:function(){return u("error",m)},showNewMessages:function(){return u("error",m)},getVisitorId:function(){return u("error",m),""},startTour:function(){return u("error",m)},trackEvent:function(){return u("error",m)}}),A=function(e){var t=window,c=t.Intercom;if(typeof c=="function")c("reattach_activator"),c("update",t.intercomSettings);else{var d=document,v=function g(){g.c(arguments)};v.q=[],v.c=function(g){v.q.push(g)},t.Intercom=v;var _=function(){var I=d.createElement("script");I.type="text/javascript",I.async=!0,I.src="https://widget.intercom.io/widget/"+e;var j=d.getElementsByTagName("script")[0];j.parentNode.insertBefore(I,j)};document.readyState==="complete"?_():t.attachEvent?t.attachEvent("onload",_):t.addEventListener("load",_,!1)}},w=function(e){return{custom_launcher_selector:e.customLauncherSelector,alignment:e.alignment,vertical_padding:e.verticalPadding,horizontal_padding:e.horizontalPadding,hide_default_launcher:e.hideDefaultLauncher,session_duration:e.sessionDuration,action_color:e.actionColor,background_color:e.backgroundColor}},p=function(e){return f({company_id:e.companyId,name:e.name,created_at:e.createdAt,plan:e.plan,monthly_spend:e.monthlySpend,user_count:e.userCount,size:e.size,website:e.website,industry:e.industry},e.customAttributes)},M=function(e){return{type:e.type,image_url:e.imageUrl}},S=function(e){var t;return f({email:e.email,user_id:e.userId,created_at:e.createdAt,name:e.name,phone:e.phone,last_request_at:e.lastRequestAt,unsubscribed_from_emails:e.unsubscribedFromEmails,language_override:e.languageOverride,utm_campaign:e.utmCampaign,utm_content:e.utmContent,utm_medium:e.utmMedium,utm_source:e.utmSource,utm_term:e.utmTerm,avatar:e.avatar&&M(e.avatar),user_hash:e.userHash,company:e.company&&p(e.company),companies:(t=e.companies)==null?void 0:t.map(p)},e.customAttributes)},D=function(e){return L(f({},w(e),S(e)))},l=function(e){var t=e.appId,c=e.autoBoot,d=c===void 0?!1:c,v=e.children,_=e.onHide,g=e.onShow,I=e.onUnreadCountChange,j=e.shouldInitialize,Z=j===void 0?!E:j,q=e.apiBase,ee=R(e,["appId","autoBoot","children","onHide","onShow","onUnreadCountChange","shouldInitialize","apiBase"]);T(ee);var y=Object(r.useRef)(t),C=Object(r.useRef)(q),O=Object(r.useRef)(d),z=Object(r.useRef)(Z);!E&&!window.Intercom&&z.current&&(A(y.current),_&&o("onHide",_),g&&o("onShow",g),I&&o("onUnreadCountChange",I),d&&(o("boot",f({app_id:y.current},C.current&&{api_base:C.current})),window.intercomSettings=f({app_id:y.current},C.current&&{api_base:C.current})));var i=Object(r.useCallback)(function(a,h){if(a===void 0&&(a="A function"),!window.Intercom&&!z.current){u("warn","Intercom instance is not initialized because `shouldInitialize` is set to `false` in `IntercomProvider`");return}if(!O.current){u("warn",["'"+a+"' was called but Intercom has not booted yet. ","Please call 'boot' before calling '"+a+"' or ","set 'autoBoot' to true in the IntercomProvider."].join(""));return}return h()},[]),K=Object(r.useCallback)(function(a){if(!window.Intercom&&!z.current){u("warn","Intercom instance is not initialized because `shouldInitialize` is set to `false` in `IntercomProvider`");return}if(!O.current){var h=f({app_id:y.current},C.current&&{api_base:C.current},a&&D(a));window.intercomSettings=h,o("boot",h),O.current=!0}},[]),W=Object(r.useCallback)(function(){!O.current||(o("shutdown"),O.current=!1)},[]),x=Object(r.useCallback)(function(){!O.current||(o("shutdown"),delete window.Intercom,delete window.intercomSettings,O.current=!1)},[]),N=Object(r.useCallback)(function(){i("update",function(){var a=new Date().getTime();o("update",{last_requested_at:a})})},[i]),k=Object(r.useCallback)(function(a){i("update",function(){if(!a){N();return}var h=D(a);window.intercomSettings=f({},window.intercomSettings,h),o("update",h)})},[i,N]),V=Object(r.useCallback)(function(){i("hide",function(){o("hide")})},[i]),H=Object(r.useCallback)(function(){i("show",function(){return o("show")})},[i]),$=Object(r.useCallback)(function(){i("showMessages",function(){o("showMessages")})},[i]),J=Object(r.useCallback)(function(a){i("showNewMessage",function(){a?o("showNewMessage",a):o("showNewMessage")})},[i]),F=Object(r.useCallback)(function(){return i("getVisitorId",function(){return o("getVisitorId")})},[i]),G=Object(r.useCallback)(function(a){i("startTour",function(){o("startTour",a)})},[i]),Y=Object(r.useCallback)(function(a,h){i("trackEvent",function(){h?o("trackEvent",a,h):o("trackEvent",a)})},[i]),ne=Object(r.useMemo)(function(){return{boot:K,shutdown:W,hardShutdown:x,update:k,hide:V,show:H,showMessages:$,showNewMessages:J,getVisitorId:F,startTour:G,trackEvent:Y}},[K,W,x,k,V,H,$,J,F,G,Y]),te=Object(r.useMemo)(function(){return v},[v]);return Object(r.createElement)(b.Provider,{value:ne},te)},U=function(){return Object(r.useContext)(b)},B=function(){return U()}}}]);
